<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tạo mã QR chúc mừng ngày 1/6 💖</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(-45deg, #ff6b9d, #c44569, #f8b500, #e55039, #3c6382, #40407a, #00d2d3, #ff9ff3);
            background-size: 400% 400%;
            animation: gradientShift 8s ease infinite;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .floating-shapes {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .shape {
            position: absolute;
            opacity: 0.6;
            animation: float 6s ease-in-out infinite;
        }

        .shape:nth-child(1) {
            top: 10%;
            left: 20%;
            width: 80px;
            height: 80px;
            background: linear-gradient(45deg, #ff6b9d, #c44569);
            border-radius: 50%;
            animation-delay: 0s;
        }

        .shape:nth-child(2) {
            top: 60%;
            left: 80%;
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, #f8b500, #e55039);
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            animation-delay: -2s;
        }

        .shape:nth-child(3) {
            top: 30%;
            right: 10%;
            width: 100px;
            height: 100px;
            background: linear-gradient(45deg, #00d2d3, #3c6382);
            clip-path: polygon(25% 0%, 100% 0%, 75% 100%, 0% 100%);
            animation-delay: -4s;
        }

        .shape:nth-child(4) {
            bottom: 20%;
            left: 10%;
            width: 70px;
            height: 70px;
            background: linear-gradient(45deg, #ff9ff3, #40407a);
            border-radius: 20px;
            animation-delay: -1s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        .container {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 30px;
            padding: 50px;
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            max-width: 550px;
            width: 100%;
            text-align: center;
            animation: slideIn 1s ease-out, glow 4s ease-in-out infinite;
            position: relative;
            overflow: hidden;
        }

        .container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: shine 3s linear infinite;
            pointer-events: none;
        }

        @keyframes shine {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(50px) scale(0.8);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2), 0 0 30px rgba(255, 107, 157, 0.3); }
            50% { box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2), 0 0 60px rgba(255, 107, 157, 0.6); }
        }

        h1 {
            background: linear-gradient(45deg, #ff6b9d, #c44569, #f8b500, #e55039);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: textGradient 3s ease infinite;
            margin-bottom: 15px;
            font-size: 2.8em;
            font-weight: 800;
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        @keyframes textGradient {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .subtitle {
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 35px;
            font-size: 1.2em;
            font-weight: 400;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.8; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.02); }
        }

        .input-group {
            margin-bottom: 30px;
            text-align: left;
            position: relative;
        }

        label {
            display: block;
            margin-bottom: 10px;
            color: rgba(255, 255, 255, 0.95);
            font-weight: 600;
            font-size: 1.1em;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }

        input, textarea {
            width: 100%;
            padding: 18px 20px;
            border: 2px solid transparent;
            border-radius: 20px;
            font-size: 16px;
            font-family: 'Poppins', sans-serif;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        input:focus, textarea:focus {
            outline: none;
            border: 2px solid #ff6b9d;
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 
                0 0 25px rgba(255, 107, 157, 0.4),
                0 8px 25px rgba(0, 0, 0, 0.15);
            transform: translateY(-2px);
        }

        textarea {
            height: 120px;
            resize: vertical;
        }

        .btn {
            background: linear-gradient(45deg, #ff6b9d, #c44569, #f8b500, #e55039);
            background-size: 300% 300%;
            animation: btnGradient 3s ease infinite;
            color: white;
            border: none;
            padding: 18px 35px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 700;
            font-family: 'Poppins', sans-serif;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            margin: 15px;
            box-shadow: 
                0 10px 25px rgba(255, 107, 157, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        @keyframes btnGradient {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.6s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 
                0 15px 35px rgba(255, 107, 157, 0.6),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }

        .btn:active {
            transform: translateY(-1px) scale(1.02);
        }

        #qrcode {
            margin: 40px 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 220px;
            position: relative;
        }

        #qrcode canvas {
            border-radius: 20px;
            box-shadow: 
                0 15px 35px rgba(0, 0, 0, 0.2),
                0 0 50px rgba(255, 107, 157, 0.3);
            animation: qrPulse 3s ease-in-out infinite;
        }

        @keyframes qrPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .qr-placeholder {
            color: rgba(255, 255, 255, 0.8);
            font-style: italic;
            font-size: 1.1em;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            animation: placeholderFloat 2s ease-in-out infinite;
        }

        @keyframes placeholderFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
        }

        .celebration-page {
            display: none;
            text-align: center;
            padding: 50px 30px;
            position: relative;
        }

        .celebration-page.active {
            display: block;
            animation: celebrationEnter 1.5s ease-out;
        }

        @keyframes celebrationEnter {
            0% { 
                opacity: 0; 
                transform: scale(0.8) rotate(-10deg);
            }
            50% {
                transform: scale(1.1) rotate(5deg);
            }
            100% { 
                opacity: 1; 
                transform: scale(1) rotate(0deg);
            }
        }

        .rainbow-text {
            background: linear-gradient(45deg, #ff6b9d, #c44569, #f8b500, #e55039, #3c6382, #40407a, #00d2d3, #ff9ff3);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: rainbow 4s ease infinite;
            font-size: 3em;
            font-weight: 800;
            margin: 20px 0;
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        @keyframes rainbow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .heart {
            font-size: 4em;
            animation: heartbeat 1.5s ease-in-out infinite, spin 8s linear infinite;
            display: inline-block;
            filter: drop-shadow(0 0 20px rgba(255, 107, 157, 0.8));
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1) rotate(var(--rotation, 0deg)); }
            50% { transform: scale(1.3) rotate(var(--rotation, 0deg)); }
        }

        @keyframes spin {
            from { --rotation: 0deg; }
            to { --rotation: 360deg; }
        }

        .personal-message {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1));
            padding: 30px;
            border-radius: 25px;
            margin: 30px 0;
            border: 2px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(15px);
            box-shadow: 
                0 15px 35px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            animation: messageGlow 3s ease-in-out infinite;
            position: relative;
            overflow: hidden;
        }

        @keyframes messageGlow {
            0%, 100% { box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2), 0 0 30px rgba(255, 107, 157, 0.2); }
            50% { box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2), 0 0 50px rgba(255, 107, 157, 0.4); }
        }

        .fireworks {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10;
        }

        .firework {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            animation: firework 3s ease-out infinite;
        }

        @keyframes firework {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            50% {
                opacity: 1;
            }
            100% {
                transform: scale(25);
                opacity: 0;
            }
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #ff6b9d;
            animation: confetti 3s linear infinite;
        }

        @keyframes confetti {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .back-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            margin-top: 30px;
        }

        .celebration-message {
            color: rgba(255, 255, 255, 0.95);
            font-size: 1.4em;
            margin: 25px 0;
            text-shadow: 0 3px 10px rgba(0, 0, 0, 0.4);
            animation: textFloat 3s ease-in-out infinite;
        }

        @keyframes textFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-8px); }
        }

        .sparkle {
            position: absolute;
            color: #ffd700;
            font-size: 20px;
            animation: sparkleAnim 2s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes sparkleAnim {
            0%, 100% { 
                opacity: 0;
                transform: scale(0) rotate(0deg);
            }
            50% { 
                opacity: 1;
                transform: scale(1) rotate(180deg);
            }
        }

        /* Mobile responsiveness */
        @media (max-width: 768px) {
            .container { 
                padding: 30px 25px; 
                margin: 10px;
            }
            h1 { font-size: 2.2em; }
            .rainbow-text { font-size: 2.2em; }
            .heart { font-size: 3em; }
        }
    </style>
</head>
<body>
    <div class="floating-shapes">
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
    </div>

    <div class="container" id="generator-page">
        <h1>🎨✨ Tạo mã QR siêu đặc biệt ✨🎨</h1>
        <p class="subtitle">🌈 Chúc mừng ngày Quốc tế Thiếu nhi 1/6 cho người yêu của bạn 🌈</p>
        
        <div class="input-group">
            <label for="partnerName">💖 Tên người yêu:</label>
            <input type="text" id="partnerName" placeholder="Nhập tên người yêu của bạn...">
        </div>
        
        <div class="input-group">
            <label for="personalMessage">💌 Lời nhắn cá nhân:</label>
            <textarea id="personalMessage" placeholder="Viết lời chúc ngọt ngào cho người yêu..."></textarea>
        </div>
        
        <button class="btn" onclick="generateQR()">🎁✨ Tạo mã QR ma thuật ✨🎁</button>
        
        <div id="qrcode">
            <div class="qr-placeholder">✨ Mã QR siêu đẹp sẽ xuất hiện ở đây ✨</div>
        </div>
        
        <button class="btn" onclick="downloadQR()" id="downloadBtn" style="display: none;">📱💎 Tải mã QR về máy 💎📱</button>
        <button class="btn" onclick="previewCelebration()">👀🎪 Xem trước trang chúc mừng 🎪👀</button>
    </div>

    <div class="container celebration-page" id="celebration-page">
        <div class="fireworks" id="fireworks"></div>
        
        <div class="heart">💖</div>
        <h1 class="rainbow-text">Chúc mừng ngày 1/6!</h1>
        
        <div id="celebrationContent">
            <h2 class="celebration-message">🌟 Gửi đến <span id="displayName">người yêu</span> của anh 🌟</h2>
            
            <p style="font-size: 1.3em; color: rgba(255, 255, 255, 0.9); margin: 25px 0; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);">
                🎈 Hôm nay là ngày Quốc tế Thiếu nhi, nhưng em vẫn là đứa trẻ đáng yêu nhất trong tim anh! 🌟✨
            </p>
            
            <div class="personal-message" id="displayMessage">
                <p style="font-size: 1.1em; line-height: 1.6; color: rgba(255, 255, 255, 0.95);"><em>Dù em đã lớn, nhưng trong mắt anh, em vẫn là cô bé đáng yêu, ngây thơ và trong sáng nhất. Chúc em luôn giữ được nụ cười rạng rỡ và trái tim thuần khiết như hôm nay!</em></p>
            </div>
            
            <div style="margin: 40px 0; font-size: 1.2em; color: rgba(255, 255, 255, 0.9); text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);">
                <p style="margin: 15px 0;">🎈🌈 Chúc em một ngày 1/6 thật vui vẻ và hạnh phúc! 🌈🎈</p>
                <p style="margin: 15px 0;">🎂✨ Hy vọng em sẽ luôn giữ được tâm hồn trẻ thơ ✨🎂</p>
                <p style="margin: 15px 0;">🌈💫 Và luôn tỏa sáng với nụ cười ngọt ngào 💫🌈</p>
            </div>
            
            <div class="heart" style="font-size: 3em;">💕</div>
            <p style="color: rgba(255, 255, 255, 0.95); font-weight: 700; margin-top: 30px; font-size: 1.4em; text-shadow: 0 3px 10px rgba(0, 0, 0, 0.4);">
                ❤️ Yêu em nhiều lắm! ❤️
            </p>
        </div>
        
        <button class="btn back-btn" onclick="backToGenerator()">🔙✨ Quay lại trang chính ✨🔙</button>
    </div>

    <script>
        let currentQRCode = null;

        // Add sparkles randomly
        function createSparkles() {
            const sparkles = ['✨', '⭐', '🌟', '💫', '🎊', '🎉'];
            setInterval(() => {
                if (Math.random() > 0.7) {
                    const sparkle = document.createElement('div');
                    sparkle.className = 'sparkle';
                    sparkle.innerHTML = sparkles[Math.floor(Math.random() * sparkles.length)];
                    sparkle.style.left = Math.random() * 100 + '%';
                    sparkle.style.top = Math.random() * 100 + '%';
                    document.body.appendChild(sparkle);
                    
                    setTimeout(() => {
                        sparkle.remove();
                    }, 2000);
                }
            }, 1000);
        }

        function generateQR() {
            const partnerName = document.getElementById('partnerName').value.trim();
            const personalMessage = document.getElementById('personalMessage').value.trim();
            
            if (!partnerName) {
                alert('🌟 Vui lòng nhập tên người yêu để tạo mã QR siêu đặc biệt! 🌟');
                return;
            }

            const celebrationData = {
                name: partnerName,
                message: personalMessage || "Dù em đã lớn, nhưng trong mắt anh, em vẫn là cô bé đáng yêu, ngây thơ và trong sáng nhất. Chúc em luôn giữ được nụ cười rạng rỡ và trái tim thuần khiết như hôm nay!"
            };
            
            const celebrationURL = `${window.location.origin}${window.location.pathname}?celebration=true&data=${encodeURIComponent(JSON.stringify(celebrationData))}`;
            
            // Clear previous QR code
            document.getElementById('qrcode').innerHTML = '';
            
            try {
                // Create QR code using QRious library
                const canvas = document.createElement('canvas');
                const qr = new QRious({
                    element: canvas,
                    value: celebrationURL,
                    size: 220,
                    background: '#ffffff',
                    foreground: '#ff6b9d',
                    level: 'M'
                });
                
                // Style the canvas
                canvas.style.borderRadius = '20px';
                canvas.style.boxShadow = '0 15px 35px rgba(0, 0, 0, 0.2), 0 0 50px rgba(255, 107, 157, 0.3)';
                canvas.style.animation = 'qrPulse 3s ease-in-out infinite';
                
                document.getElementById('qrcode').appendChild(canvas);
                document.getElementById('downloadBtn').style.display = 'inline-block';
                currentQRCode = canvas;
                
                // Create celebration effect when QR is generated
                createMiniFireworks();
            } catch (error) {
                console.error('QR Generation Error:', error);
                // Fallback method using simple QR generation
                const qrContainer = document.getElementById('qrcode');
                qrContainer.innerHTML = `
                    <div style="
                        background: white; 
                        border-radius: 20px; 
                        padding: 20px; 
                        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
                        border: 3px solid #ff6b9d;
                    ">
                        <div style="font-size: 18px; color: #ff6b9d; margin-bottom: 15px;">
                            📱 Mã QR đã được tạo!
                        </div>
                        <div style="font-size: 14px; color: #666; word-break: break-all; line-height: 1.4;">
                            Link: ${celebrationURL}
                        </div>
                        <div style="margin-top: 15px; font-size: 12px; color: #999;">
                            Sao chép link trên để chia sẻ
                        </div>
                    </div>
                `;
                createMiniFireworks();
            }
        }

        function createMiniFireworks() {
            const colors = ['#ff6b9d', '#c44569', '#f8b500', '#e55039', '#3c6382', '#00d2d3', '#ff9ff3'];
            const qrContainer = document.getElementById('qrcode');
            
            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    const firework = document.createElement('div');
                    firework.style.position = 'absolute';
                    firework.style.width = '4px';
                    firework.style.height = '4px';
                    firework.style.borderRadius = '50%';
                    firework.style.background = colors[Math.floor(Math.random() * colors.length)];
                    firework.style.left = '50%';
                    firework.style.top = '50%';
                    firework.style.animation = 'firework 2s ease-out forwards';
                    firework.style.zIndex = '1000';
                    
                    qrContainer.appendChild(firework);
                    
                    setTimeout(() => {
                        firework.remove();
                    }, 2000);
                }, i * 100);
            }
        }

        function downloadQR() {
            if (currentQRCode) {
                const link = document.createElement('a');
                link.download = 'qr-chuc-mung-1-6-sieu-dep.png';
                link.href = currentQRCode.toDataURL();
                link.click();
            }
        }

        function previewCelebration() {
            const partnerName = document.getElementById('partnerName').value.trim() || 'người yêu';
            const personalMessage = document.getElementById('personalMessage').value.trim() || 
                "Dù em đã lớn, nhưng trong mắt anh, em vẫn là cô bé đáng yêu, ngây thơ và trong sáng nhất. Chúc em luôn giữ được nụ cười rạng rỡ và trái tim thuần khiết như hôm nay!";
            
            showCelebration(partnerName, personalMessage);
        }

        function showCelebration(name, message) {
            document.getElementById('displayName').textContent = name;
            document.getElementById('displayMessage').innerHTML = `<p style="font-size: 1.1em; line-height: 1.6; color: rgba(255, 255, 255, 0.95);"><em>${message}</em></p>`;
            
            document.getElementById('generator-page').style.display = 'none';
            document.getElementById('celebration-page').classList.add('active');
            
            createFireworks();
            createConfetti();
        }

        function createFireworks() {
            const fireworksContainer = document.getElementById('fireworks');
            fireworksContainer.innerHTML = '';
            
            const colors = ['#ff6b9d', '#c44569', '#f8b500', '#e55039', '#3c6382', '#40407a', '#00d2d3', '#ff9ff3'];
            
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const firework = document.createElement('div');
                    firework.className = 'firework';
                    firework.style.left = Math.random() * 100 + '%';
                    firework.style.top = Math.random() * 100 + '%';
                    firework.style.background = colors[Math.floor(Math.random() * colors.length)];
                    firework.style.animationDelay = Math.random() * 2 + 's';
                    firework.style.boxShadow = `0 0 20px ${colors[Math.floor(Math.random() * colors.length)]}`;
                    
                    fireworksContainer.appendChild(firework);
                    
                    setTimeout(() => {
                        firework.remove();
                    }, 3000);
                }, i * 150);
            }
        }

        function createConfetti() {
            const colors = ['#ff6b9d', '#c44569', '#f8b500', '#e55039', '#3c6382', '#40407a', '#00d2d3', '#ff9ff3'];
            
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 3 + 's';
                    confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
                    
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 6000);
                }, i * 100);
            }
        }

        function backToGenerator() {
            document.getElementById('celebration-page').classList.remove('active');
            document.getElementById('generator-page').style.display = 'block';
            
            // Clear fireworks and confetti
            document.getElementById('fireworks').innerHTML = '';
            const confettis = document.querySelectorAll('.confetti');
            confettis.forEach(c => c.remove());
        }

        // Check if page loaded with celebration parameters
        window.addEventListener('load', function() {
            createSparkles();
            
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('celebration') === 'true') {
                try {
                    const data = JSON.parse(decodeURIComponent(urlParams.get('data')));
                    showCelebration(data.name, data.message);
                } catch (e) {
                    showCelebration('người yêu', 'Chúc mừng ngày Quốc tế Thiếu nhi!');
                }
            }
        });

        // Add floating hearts randomly
        setInterval(() => {
            if (Math.random() > 0.8) {
                const heart = document.createElement('div');
                heart.innerHTML = ['💖', '💕', '💗', '💝', '💘'][Math.floor(Math.random() * 5)];
                heart.style.position = 'fixed';
                heart.style.left = Math.random() * 100 + '%';
                heart.style.top = '100%';
                heart.style.fontSize = (Math.random() * 20 + 15) + 'px';
                heart.style.animation = 'floatUp 4s linear forwards';
                heart.style.pointerEvents = 'none';
                heart.style.zIndex = '5';
                
                document.body.appendChild(heart);
                
                setTimeout(() => {
                    heart.remove();
                }, 4000);
            }
        }, 2000);

        // Add CSS for floating hearts
        const style = document.createElement('style');
        style.textContent = `
            @keyframes floatUp {
                0% {
                    transform: translateY(0) rotate(0deg);
                    opacity: 1;
                }
                100% {
                    transform: translateY(-100vh) rotate(360deg);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
